(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{449:function(e,r,t){"use strict";t.r(r);var s=t(53),a=Object(s.a)({},(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h3",{attrs:{id:"中间件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#中间件"}},[e._v("#")]),e._v(" 中间件")]),e._v(" "),t("ul",[t("li",[e._v("特指:业务处理的中间流程, 好比水流处理程序, 在进入到用户家用水之前,经过一些列的处理, 这个中间的处理环节就相当于中间件")])]),e._v(" "),t("h4",{attrs:{id:"如图"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如图"}},[e._v("#")]),e._v(" 如图: "),t("img",{attrs:{src:e.$withBase("/img/middle.png"),alt:"foo"}})]),e._v(" "),t("ul",[t("li",[e._v("这样做的目的是提高了生产效率和保证了可维护性")]),e._v(" "),t("li",[e._v("而express中间件的原理: 用户建立服务开始,客户端发送http请求的时候,一直到http响应,在这中间就是中间件的处理过程, 其中每一个中间件都可以进行处理,请求或者响应,并且会影响最后的响应结果.")])]),e._v(" "),t("h4",{attrs:{id:"第一种用法-中间件有四个参数-req-res-next-err"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第一种用法-中间件有四个参数-req-res-next-err"}},[e._v("#")]),e._v(" 第一种用法:中间件有四个参数, req,res,next,err"),t("br")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("* 一般app.use(); 就表示一个中间件, 中间件设置没有限制,多少个都行<br>\n* 语法: app.use(function(req,res,next){<br>\n* req, res 参数与 最后的req,res是一样的, 请求的相关对象, 和 响应的相关对象\n* next 代表下一个<br>\n* next(); 代表继续执行下一个中间件,直到遇见res.send(); 则停止\n")])])]),t("ul",[t("li",[e._v("设置中间件的作用 "),t("br"),e._v("\n可以设置一个公共的需求,通过中间件的方法来实现,就会把最后所有的req的请求,或者res响应中的方法都覆盖到,从而就不用在每一个接口设置同样的一个需求了.")])]),e._v(" "),t("h4",{attrs:{id:"第二种用法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第二种用法"}},[e._v("#")]),e._v(" 第二种用法:")]),e._v(" "),t("ul",[t("li",[e._v("在中间件的next()中设置参数,那么就会跳过所有的中间件,以及接口设置,直接来到最后错误处理的中间件上执行:相当于:")]),e._v(" "),t("li",[e._v("如果某个中间件的next()里面有参数了,那么下面的代码都是无效的不能执行,")]),e._v(" "),t("li",[e._v("其上面的代码正常执行,然后会继续往下跳到直接处理错误的中间件上,")]),e._v(" "),t("li",[e._v("最后处理的中间件为  app.use(function(err,req,res,next){其中 err 参数就等于 next('err') 中的参数的值")]),e._v(" "),t("li",[e._v("中间件设计就是为了有错误的地方单独处理,而不影响主业务的进展.")])])])}),[],!1,null,null,null);r.default=a.exports}}]);